1684608841
waR3U4bTeM%3Af7acc26f28d45f667a6e85f6e24a1e2f-8790dbad56c70c1805f627fed714bc15
s:9964:"TzozMzoicGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlIjoxNDp7czo0MzoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBkb2NCbG9jayI7TjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGhhc2giO3M6MzI6Ijg3OTBkYmFkNTZjNzBjMTgwNWY2MjdmZWQ3MTRiYzE1IjtzOjM5OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWUiO3M6MjE6InBhY2thZ2VfcmVsYXRpb25zLnBocCI7czozOToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBwYXRoIjtzOjg5OiJ0b29scy9waHBtZXRyaWNzL3ZlbmRvci9waHBtZXRyaWNzL3BocG1ldHJpY3MvdGVtcGxhdGVzL2h0bWxfcmVwb3J0L3BhY2thZ2VfcmVsYXRpb25zLnBocCI7czo0MToiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBzb3VyY2UiO3M6NjQ5NToiPD9waHAgcmVxdWlyZSBfX0RJUl9fIC4gJy9faGVhZGVyLnBocCc7ID8+Cgo8P3BocAokcmVsYXRpb25zID0gW107CiRnZXRQYWNrYWdlTmFtZSA9IGZ1bmN0aW9uICgkbmFtZSkgewogICAgcmV0dXJuICRuYW1lID09PSAnXFwnID8gJ2dsb2JhbCcgOiBzdWJzdHIoJG5hbWUsIDAsIC0xKTsKfTsKZm9yZWFjaCAoJHBhY2thZ2VzIGFzICRwYWNrYWdlKSB7CiAgICAkcGFja2FnZU5hbWUgPSAkZ2V0UGFja2FnZU5hbWUoJHBhY2thZ2VbJ25hbWUnXSk7CiAgICAkb3V0Z29pbmdEZXBlbmRlbmNpZXMgPSBhcnJheV9tYXAoCiAgICAgICAgJGdldFBhY2thZ2VOYW1lLAogICAgICAgIGlzc2V0KCRwYWNrYWdlWydvdXRnb2luZ19wYWNrYWdlX2RlcGVuZGVuY2llcyddKSA/ICRwYWNrYWdlWydvdXRnb2luZ19wYWNrYWdlX2RlcGVuZGVuY2llcyddIDogW10KICAgICk7CiAgICAkcmVsYXRpb25zWyRwYWNrYWdlTmFtZV0gPSBbCiAgICAgICAgJ25hbWUnID0+ICRwYWNrYWdlTmFtZSwKICAgICAgICAnc2l6ZScgPT4gMzAwMCwKICAgICAgICAncmVsYXRpb25zJyA9PiAkb3V0Z29pbmdEZXBlbmRlbmNpZXMsCiAgICBdOwogICAgLy8gQWRkaW5nIHZlbmRvciBwYWNrYWdlcwogICAgZm9yZWFjaCAoJG91dGdvaW5nRGVwZW5kZW5jaWVzIGFzICRlYWNoKSB7CiAgICAgICAgaWYgKGlzc2V0KCRyZWxhdGlvbnNbJGVhY2hdKSkgewogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgJHJlbGF0aW9uc1skZWFjaF0gPSBbCiAgICAgICAgICAgICduYW1lJyA9PiAkZWFjaCwKICAgICAgICAgICAgJ3NpemUnID0+IDMwMDAsCiAgICAgICAgICAgICdyZWxhdGlvbnMnID0+IFtdCiAgICAgICAgXTsKICAgIH0KfQokcmVsYXRpb25zID0gYXJyYXlfdmFsdWVzKCRyZWxhdGlvbnMpOwo/PgoKCjxkaXYgY2xhc3M9InJvdyI+CiAgICA8ZGl2IGNsYXNzPSJjb2x1bW4iPgogICAgICAgIDxkaXYgY2xhc3M9ImJsb2MiPgogICAgICAgICAgICA8aDQ+UGFja2FnZSByZWxhdGlvbnM8L2g0PgogICAgICAgICAgICA8ZGl2IGlkPSJjaGFydC1yZWxhdGlvbnMiPjwvZGl2PgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CjwvZGl2PgoKPD9waHAgcmVxdWlyZSBfX0RJUl9fIC4gJy9fZm9vdGVyLnBocCc7ID8+CgoKPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiPgoKCiAgICB2YXIgcmVsYXRpb25zID0gPD9waHAgZWNobyBqc29uX2VuY29kZSgkcmVsYXRpb25zLCBKU09OX1BSRVRUWV9QUklOVCk7ID8+OwoKICAgIC8qKgogICAgICogVGhhbmtzIHRvIGh0dHA6Ly9ibC5vY2tzLm9yZy9tYm9zdG9jay9yYXcvNzYwNzk5OS8KICAgICAqLwogICAgZnVuY3Rpb24gdXBkYXRlUmVsYXRpb25zQ2hhcnQoKSB7CgoKICAgICAgICB2YXIgZGlhbWV0ZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnQtcmVsYXRpb25zJykub2Zmc2V0V2lkdGgsCiAgICAgICAgICAgIHJhZGl1cyA9IGRpYW1ldGVyIC8gMiwKICAgICAgICAgICAgaW5uZXJSYWRpdXMgPSByYWRpdXMgLSAzMjA7CgogICAgICAgIHZhciBjbHVzdGVyID0gZDMubGF5b3V0LmNsdXN0ZXIoKQogICAgICAgICAgICAuc2l6ZShbMzYwLCBpbm5lclJhZGl1c10pCiAgICAgICAgICAgIC5zb3J0KG51bGwpCiAgICAgICAgICAgIC52YWx1ZShmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQuc2l6ZTsKICAgICAgICAgICAgfSk7CgogICAgICAgIHZhciBidW5kbGUgPSBkMy5sYXlvdXQuYnVuZGxlKCk7CgogICAgICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUucmFkaWFsKCkKICAgICAgICAgICAgLmludGVycG9sYXRlKCJidW5kbGUiKQogICAgICAgICAgICAudGVuc2lvbiguODUpCiAgICAgICAgICAgIC5yYWRpdXMoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkLnk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hbmdsZShmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQueCAvIDE4MCAqIE1hdGguUEk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KCIjY2hhcnQtcmVsYXRpb25zIikuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCBkaWFtZXRlcikKICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGRpYW1ldGVyKQogICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIHJhZGl1cyArICIsIiArIHJhZGl1cyArICIpIik7CgogICAgICAgIHZhciBsaW5rID0gc3ZnLmFwcGVuZCgiZyIpLnNlbGVjdEFsbCgiLmxpbmsiKSwKICAgICAgICAgICAgbm9kZSA9IHN2Zy5hcHBlbmQoImciKS5zZWxlY3RBbGwoIi5ub2RlIik7CgoKICAgICAgICB2YXIgbm9kZXMgPSBjbHVzdGVyLm5vZGVzKHBhY2thZ2VIaWVyYXJjaHkocmVsYXRpb25zKSksCiAgICAgICAgICAgIGxpbmtzID0gcGFja2FnZUltcG9ydHMobm9kZXMpOwogICAgICAgIGxpbmsgPSBsaW5rCiAgICAgICAgICAgIC5kYXRhKGJ1bmRsZShsaW5rcykpCiAgICAgICAgICAgIC5lbnRlcigpLmFwcGVuZCgicGF0aCIpCiAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICBkLnNvdXJjZSA9IGRbMF0sIGQudGFyZ2V0ID0gZFtkLmxlbmd0aCAtIDFdOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGluayIpCiAgICAgICAgICAgIC5hdHRyKCJkIiwgbGluZSk7CgogICAgICAgIG5vZGUgPSBub2RlCiAgICAgICAgICAgIC5kYXRhKG5vZGVzLmZpbHRlcihmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgcmV0dXJuICFuLmNoaWxkcmVuOwogICAgICAgICAgICB9KSkKICAgICAgICAgICAgLmVudGVyKCkuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgIm5vZGUiKQogICAgICAgICAgICAuYXR0cigiZHkiLCAiLjMxZW0iKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAicm90YXRlKCIgKyAoZC54IC0gOTApICsgIil0cmFuc2xhdGUoIiArIChkLnkgKyA4KSArICIsMCkiICsgKGQueCA8IDE4MCA/ICIiIDogInJvdGF0ZSgxODApIik7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQueCA8IDE4MCA/ICJzdGFydCIgOiAiZW5kIjsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkLmtleTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBtb3VzZW92ZXJlZCkKICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIG1vdXNlb3V0ZWQpOwoKCi8vICAgICAgICBkMy5kYXRhKHJlbGF0aW9ucyk7CgogICAgICAgIGZ1bmN0aW9uIG1vdXNlb3ZlcmVkKGQpIHsKICAgICAgICAgICAgbm9kZQogICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICBuLnRhcmdldCA9IG4uc291cmNlID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGxpbmsKICAgICAgICAgICAgICAgIC5jbGFzc2VkKCJsaW5rLS10YXJnZXQiLCBmdW5jdGlvbiAobCkgewogICAgICAgICAgICAgICAgICAgIGlmIChsLnRhcmdldCA9PT0gZCkgcmV0dXJuIGwuc291cmNlLnNvdXJjZSA9IHRydWU7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLmNsYXNzZWQoImxpbmstLXNvdXJjZSIsIGZ1bmN0aW9uIChsKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGwuc291cmNlID09PSBkKSByZXR1cm4gbC50YXJnZXQudGFyZ2V0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChsKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGwudGFyZ2V0ID09PSBkIHx8IGwuc291cmNlID09PSBkOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcyk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIG5vZGUKICAgICAgICAgICAgICAgIC5jbGFzc2VkKCJub2RlLS10YXJnZXQiLCBmdW5jdGlvbiAobikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnRhcmdldDsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAuY2xhc3NlZCgibm9kZS0tc291cmNlIiwgZnVuY3Rpb24gKG4pIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zb3VyY2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIG1vdXNlb3V0ZWQoZCkgewogICAgICAgICAgICBsaW5rCiAgICAgICAgICAgICAgICAuY2xhc3NlZCgibGluay0tdGFyZ2V0IiwgZmFsc2UpCiAgICAgICAgICAgICAgICAuY2xhc3NlZCgibGluay0tc291cmNlIiwgZmFsc2UpOwoKICAgICAgICAgICAgbm9kZQogICAgICAgICAgICAgICAgLmNsYXNzZWQoIm5vZGUtLXRhcmdldCIsIGZhbHNlKQogICAgICAgICAgICAgICAgLmNsYXNzZWQoIm5vZGUtLXNvdXJjZSIsIGZhbHNlKTsKICAgICAgICB9CgogICAgICAgIGQzLnNlbGVjdChzZWxmLmZyYW1lRWxlbWVudCkuc3R5bGUoImhlaWdodCIsIGRpYW1ldGVyICsgInB4Iik7CgogICAgICAgIC8vIExhemlseSBjb25zdHJ1Y3QgdGhlIHBhY2thZ2UgaGllcmFyY2h5IGZyb20gY2xhc3MgbmFtZXMuCiAgICAgICAgZnVuY3Rpb24gcGFja2FnZUhpZXJhcmNoeShjbGFzc2VzKSB7CiAgICAgICAgICAgIHZhciBtYXAgPSB7fTsKCiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmQobmFtZSwgZGF0YSkgewogICAgICAgICAgICAgICAgbmFtZSA9IChkYXRhID8gbmFtZSArICcgJyA6IG5hbWUpOwogICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBtYXBbbmFtZV07CiAgICAgICAgICAgICAgICBpZiAoIW5vZGUpIHsKICAgICAgICAgICAgICAgICAgICBub2RlID0gbWFwW25hbWVdID0gZGF0YSB8fCB7bmFtZTogbmFtZSwgY2hpbGRyZW46IFtdfTsKICAgICAgICAgICAgICAgICAgICBpZiAobmFtZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQgPSBmaW5kKCIiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFub2RlLnBhcmVudC5jaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZS5wYXJlbnQuY2hpbGRyZW4gPSBbXTsgLy8gZml4IGFub21hbGllcwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUucGFyZW50LmNoaWxkcmVuLnB1c2gobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUua2V5ID0gbmFtZS50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNsYXNzZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgZmluZChkLm5hbWUsIGQpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBtYXBbIiJdOwogICAgICAgIH0KCiAgICAgICAgLy8gUmV0dXJuIGEgbGlzdCBvZiBpbXBvcnRzIGZvciB0aGUgZ2l2ZW4gYXJyYXkgb2Ygbm9kZXMuCiAgICAgICAgZnVuY3Rpb24gcGFja2FnZUltcG9ydHMobm9kZXMpIHsKICAgICAgICAgICAgdmFyIG1hcCA9IHt9LAogICAgICAgICAgICAgICAgaW1wb3J0cyA9IFtdOwoKICAgICAgICAgICAgLy8gQ29tcHV0ZSBhIG1hcCBmcm9tIG5hbWUgdG8gbm9kZS4KICAgICAgICAgICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgbWFwW2QubmFtZV0gPSBkOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEZvciBlYWNoIGltcG9ydCwgY29uc3RydWN0IGEgbGluayBmcm9tIHRoZSBzb3VyY2UgdG8gdGFyZ2V0IG5vZGUuCiAgICAgICAgICAgIG5vZGVzLmZvckVhY2goZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIGlmIChkLnJlbGF0aW9ucykgZC5yZWxhdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoaSkgewogICAgICAgICAgICAgICAgICAgIGltcG9ydHMucHVzaCh7c291cmNlOiBtYXBbZC5uYW1lXSwgdGFyZ2V0OiBtYXBbaV19KTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJldHVybiBpbXBvcnRzOwogICAgICAgIH0KCgogICAgfQoKICAgIGRvY3VtZW50Lm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykgewogICAgICAgICAgICB1cGRhdGVSZWxhdGlvbnNDaGFydCgpOwogICAgICAgIH0KICAgIH07Cgo8L3NjcmlwdD4KIjtzOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG5hbWVzcGFjZXMiO2E6MDp7fXM6NDM6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAaW5jbHVkZXMiO2E6MDp7fXM6NDQ6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAZnVuY3Rpb25zIjthOjA6e31zOjQ0OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGNvbnN0YW50cyI7YTowOnt9czo0MjoiAHBocERvY3VtZW50b3JcUmVmbGVjdGlvblxQaHBcRmlsZQBjbGFzc2VzIjthOjA6e31zOjQ1OiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGludGVyZmFjZXMiO2E6MDp7fXM6NDE6IgBwaHBEb2N1bWVudG9yXFJlZmxlY3Rpb25cUGhwXEZpbGUAdHJhaXRzIjthOjA6e31zOjQwOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAGVudW1zIjthOjA6e31zOjQzOiIAcGhwRG9jdW1lbnRvclxSZWZsZWN0aW9uXFBocFxGaWxlAG1ldGFkYXRhIjthOjA6e319";